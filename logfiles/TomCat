Starting Chef Client, version 14.0.190
resolving cookbooks for run list: ["tomcat::java_pack", "tomcat", "tomcat::war_deploy"]
Synchronizing Cookbooks:
  - tomcat (0.1.0)
Installing Cookbook Gems:
Compiling Cookbooks...
Converging 16 resources
Recipe: tomcat::java_pack
  * yum_package[java-1.7.0-openjdk-devel] action install
    - install version 1:1.7.0.171-2.6.13.0.el7_4.x86_64 of package java-1.7.0-openjdk-devel
  * yum_package[vim] action install
    - install version 2:7.4.160-2.el7.x86_64 of package vim
Recipe: tomcat::default
  * group[tomcat] action create
    - create group tomcat
  * linux_user[tomcat] action create
    - create user tomcat
  * directory[/opt/tomcat] action create
    - create new directory /opt/tomcat
    - change group from '' to 'tomcat'
    - restore selinux security context
  * cookbook_file[/opt/apache-tomcat-8.5.29.tar.gz] action create
    - create new file /opt/apache-tomcat-8.5.29.tar.gz
    - update content in file /opt/apache-tomcat-8.5.29.tar.gz from none to 6961e1
    (new content is binary, diff output suppressed)
    - change mode from '' to '0644'
    - restore selinux security context
  * execute[tar xvf /opt/apache-tomcat-8.5.29.tar.gz -C /opt/tomcat --strip-components=1] action run
    - execute tar xvf /opt/apache-tomcat-8.5.29.tar.gz -C /opt/tomcat --strip-components=1
  * execute[chgrp -R tomcat /opt/tomcat] action run
    - execute chgrp -R tomcat /opt/tomcat
  * directory[opt/tomcat/conf] action create
    - change mode from '0700' to '0755'
    - restore selinux security context
  * execute[chmod g+r /opt/tomcat/conf/*] action run
    - execute chmod g+r /opt/tomcat/conf/*
  * execute[chown -R tomcat /opt/tomcat/webapps/  /opt/tomcat/work/ /opt/tomcat/temp/ /opt/tomcat/logs/] action run
    - execute chown -R tomcat /opt/tomcat/webapps/  /opt/tomcat/work/ /opt/tomcat/temp/ /opt/tomcat/logs/
  * cookbook_file[/etc/systemd/system/tomcat.service] action create
    - create new file /etc/systemd/system/tomcat.service
    - update content in file /etc/systemd/system/tomcat.service from none to 2dbd70
    --- /etc/systemd/system/tomcat.service	2018-04-12 09:52:20.851300863 +0000
    +++ /etc/systemd/system/.chef-tomcat20180412-1255-16nc8h9.service	2018-04-12 09:52:20.851300863 +0000
    @@ -1 +1,27 @@
    +# Systemd unit file for tomcat
    +[Unit]
    +Description=Apache Tomcat Web Application Container
    +After=syslog.target network.target
    +
    +[Service]
    +Type=forking
    +
    +Environment=JAVA_HOME=/usr/lib/jvm/jre
    +Environment=CATALINA_PID=/opt/tomcat/temp/tomcat.pid
    +Environment=CATALINA_HOME=/opt/tomcat
    +Environment=CATALINA_BASE=/opt/tomcat
    +Environment='CATALINA_OPTS=-Xms512M -Xmx1024M -server -XX:+UseParallelGC'
    +Environment='JAVA_OPTS=-Djava.awt.headless=true -Djava.security.egd=file:/dev/./urandom'
    +
    +ExecStart=/opt/tomcat/bin/startup.sh
    +ExecStop=/bin/kill -15 $MAINPID
    +
    +User=tomcat
    +Group=tomcat
    +UMask=0007
    +RestartSec=10
    +Restart=always
    +
    +[Install]
    +WantedBy=multi-user.target
    - restore selinux security context
  * execute[systemctl daemon-reload] action run
    - execute systemctl daemon-reload
  * service[tomcat] action start
    - start service service[tomcat]
  * service[tomcat] action enable
    - enable service service[tomcat]
Recipe: tomcat::war_deploy
  * cookbook_file[/opt/tomcat/webapps/OMS.war] action create
    - create new file /opt/tomcat/webapps/OMS.war
    - update content in file /opt/tomcat/webapps/OMS.war from none to 47d9b9
    (file sizes exceed 10000000 bytes, diff output suppressed)
    - change mode from '' to '0644'
    - restore selinux security context
  * service[tomcat] action restart
    - restart service service[tomcat]

Running handlers:
Running handlers complete
Chef Client finished, 17/17 resources updated in 02 minutes 11 seconds
